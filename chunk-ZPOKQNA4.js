import"./chunk-CQ6CF5NJ.js";import"./chunk-IWSNWGAY.js";import{a as A,b as _}from"./chunk-DXPELR5K.js";import{b as F,c as g,d as B,e as N,g as D,h as M,i as R,j as x,l as E}from"./chunk-TF6NDRWN.js";import{a as T}from"./chunk-HPQ2KHOT.js";import{c as C,h as y,j as S}from"./chunk-TP7WERXT.js";import{$a as u,Ka as d,U as n,Z as b,cb as l,db as m,eb as s,ec as v,jb as f,sb as p,zb as h}from"./chunk-SKGLYFGY.js";var K=(()=>{let r=class r{constructor(){this.blogService=n(T),this.activatedRouter=n(y),this.fb=n(x),this.router=n(S),this.blogs=[],this.editorConfig={editable:!0,spellcheck:!0,height:"20rem",minHeight:"15rem",placeholder:"Enter text here...",translate:"no",defaultParagraphSeparator:"p",defaultFontName:"Arial"}}ngOnInit(){this.blogForm=this.fb.group({blogTitle:["",g.required],blogCatagory:["",g.required],blogShortDesc:["",g.required],blogContent:["",g.required],userName:localStorage.getItem("userName")}),this.fetchBlog()}submit(){let i=this.activatedRouter.snapshot.paramMap.get("_id");i!=null?this.blogService.updateBlog(i,this.blogForm.value).subscribe({next:e=>{console.log("Res:",e),this.router.navigate(["/myBlogs"])},error:e=>{console.log(e)}}):this.blogForm.valid?this.blogService.createBlog(this.blogForm.value).subscribe({next:e=>{alert(e.message),this.blogForm.reset(),this.router.navigate(["/myBlogs"])},error:e=>{console.log(e)}}):alert("Form Invalid")}fetchBlog(){this.activatedRouter.paramMap.subscribe(i=>{let e=i.get("_id");e&&this.blogService.getBlogById(e).subscribe(t=>{let o=Object.values(t);console.log("Type: ",typeof o);for(var a=o.length-1;a>=0;a--)typeof o[a]!="object"||o[a]===null?o.splice(a,1):this.blogs=o;this.blogForm.patchValue({blogTitle:t.data.blogTitle,blogCatagory:t.data.blogCatagory,blogShortDesc:t.data.blogShortDesc,blogContent:t.data.blogContent})})})}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b({type:r,selectors:[["app-create-blog"]],standalone:!0,features:[h],decls:16,vars:2,consts:[[1,"container","mt-2","mb-2"],[2,"text-align","center","font-weight","bold","color","blue"],[3,"formGroup"],[1,"row"],[1,"col-6"],["type","text","formControlName","blogTitle","placeholder","blogtitle",1,"form-control"],["formControlName","blogCatagory","placeholder","blogCatagory",1,"form-control"],["type","text","formControlName","blogShortDesc","placeholder","Short Description",1,"form-control"],[1,"mt-3"],["formControlName","blogContent",3,"config"],[1,"btn","btn-sm","btn-primary","mt-2",3,"click"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"h1",1),p(2,"Create Blog"),m(),l(3,"form",2)(4,"div",3)(5,"div",4),s(6,"input",5)(7,"br"),m(),l(8,"div",4),s(9,"input",6)(10,"br"),m()(),s(11,"input",7),l(12,"div",8),s(13,"angular-editor",9),l(14,"button",10),f("click",function(){return t.submit()}),p(15,"Add Blog"),m()()()()),e&2&&(d(3),u("formGroup",t.blogForm),d(10),u("config",t.editorConfig))},dependencies:[v,_,A,C,E,D,F,B,N,M,R]});let c=r;return c})();export{K as default};
